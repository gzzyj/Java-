# 分析器剖析
无论是内建的还是自定义的分析器，都是一个包含三个子块的包。这三个子块分别为: 字符过滤器，分词器和词元过滤器。 

内置的分析器将这些构件预先打包为适合不同语言和文本类型的分析器。Elasticsearch还公开了各个构建基块，以便可以将其组合以定义新的自定义分析器。

## 字符过滤器
字符过滤器以字符流的形式接收原始文本，并且可以进行增加,删除和转换字符。 例如，字符过滤器用于将印度阿拉伯数字(٠‎١٢٣٤٥٦٧٨‎٩‎)转换成相应的阿拉伯拉丁数字(0123456789)，或者从流中跳过像<b> 一样的HTML元素。 

分析器可以有0个或多个字符过滤器，多个过滤器之间按顺序应用。 

## 分词器
分词器接受字符流，将字符流分成关键词，并且输出关键词序列。 例如,```whitespace``` 分词器将文本在所有出现空格位置断开，使文本变成一个关键词序列。 ```"Quick brown fox!"```文本将转化成关键词数组```[Quick,brown,fox!]```

分词器还负责记录每个关键词的顺序或位置，以及关键词在原始字符串中出现的开始和结束字符的偏移量。

一个分析器必须包含一个分词器。 

## 关键词过滤器
关键词过滤器接收关键词流，并可对关键词流增加，删除和改变。 例如，```lowercase``` 关键词过滤器转换所有的关键词成小写；```stop```关键词分析器将```the```等停用词从关键词流中删除；```synonym```关键词过滤器引入同义词进关键词流中。 

关键词过滤器不允许修改关键词的位置或者字符偏移。

一个分析器可以包含0个或多个关键词过滤器，关键词过滤器按顺序被调用。 