# 物理查询
## 操作符号
* 一元操作符（只操作一个关系）  

> 1、 扫描、筛选、投影--非阻塞的一元操作。  
> 2、 排序、分组、去重复--阻塞的一元操作。    
> 
> 备注： 非阻塞代表不需要等待整个关系扫描完即可以返回，阻塞指需要等待整个关系扫描完才能返回。 例如排序，一个情况，如果不扫描完整个关系，即便先前返回的所有结果都是符合预期的，但是如果关系的最后一个元组需要第一个输出，返回的结果就是不正确的。

* 二元操作（操作两个关系）  

> 1、 集合、包的并、交、差。  
> 2、 积和自然连接  

## 评估方法
### 衡量代价的参数
对于关系R
> 1、 使用`B(R)`表示关系R占用磁盘的块数目。一般认为关系R是聚簇的，如果不需要特别指出也用`B`表示。  
> 2、使用`T(R)` 表示关系R的元组数目。如果关系R不是聚簇的，极端情况下认为`B(R)` = `T(R)`，即每一个元组在单独的块上。如果不需要特别指出也用`T`表示。    
> 3、使用`V(R,a)`表示关系R在a列上具有不相同的值的个数。
 
## 实现算法与迭代器
### 一趟算法  
适用于非阻塞的一元操作。对于阻塞的一元操作，以及二元操作，需要至少一个关系能加载入主内存。
#### 非阻塞的一元操作（扫描、筛选、投影）

下图是非阻塞一元操作符实现流程：  
<img src="/Users/zzswallowafterlight/Document/markdown/图片素材/非阻塞一元操作一趟算法.png" alt="示意图" width="313" height="200" />

步骤如下：
 
1. 读取关系R的一块进输入缓冲区。
2. 执行一元操作，写入输出缓冲区。

分析： 
对缓冲区大小没有要求，读完一个元组处理完即可输出。 

#### 阻塞的一元操作（去重复、排序、分组）

下图是阻塞一元操作符实现流程：   
<img src="/Users/zzswallowafterlight/Document/markdown/图片素材/阻塞一元操作一趟算法.png" alt="示意图" width="363" height="220" />

对于去重复操作:   
1.  


### 两趟算法    

